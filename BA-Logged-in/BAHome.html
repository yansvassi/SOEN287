<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Page</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="../mpstyle.css">
  <link rel="stylesheet" href="../footerStyles.css">
  <script src="../navbarscroll.js"></script>
  <link rel="stylesheet" href="../MainPageStyle.css">

  <style>
    /* Position the toggle button */
    .edit-mode-container {
      display: flex;
      justify-content: center;
      gap: 10px; /* Add spacing between buttons */
    }

    #toggleEditModeBtn,
    #saveChangesBtn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #345f82;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 16px;
    }

    #toggleEditModeBtn:hover,
    #saveChangesBtn:hover {
      background-color: #002e73;
    }

    /* Visual cues for editable text */
    .editable {
      cursor: text;
    }

    .editable:focus {
      outline: 2px solid #5f96e3;
      border-radius: 4px;
    }
  </style>
</head>

<body>

<!-- The Navigation Bar -->
<div id="logged-in-navbar-BA"></div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch('../BA-Logged-in/BALoggedInNav.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('logged-in-navbar-BA').innerHTML = data;
      })
      .catch(error => console.error('Error loading logged-in navbar:', error));
  });
</script>

<!-- Front Page Content -->
<form id="updateDescriptionsForm">
  <div class="frontimage-container">
    <img class="front-page" id="frontImage" src="../images/HomePage.webp" alt="Front Image">

    <div class="welcome-text">
      <h1 class="text-title editable" id="welcomeTitle" contenteditable="true">Welcome to this company</h1>
    </div>
    
    <div class="text editable" id="welcomeSlogan" contenteditable="true">Add a slogan.</div>
  </div>

  <div class="welcome-container">
    <div class="welcome-text">
      <h1 class="editable" id="coreValuesTitle" contenteditable="true">Quality, Consistency, Personalization</h1>
      <p class="editable" id="coreValuesText" contenteditable="true">
        Established in Montreal, Quebec in 2022. Shineâ€™s 3 core values drive our one mission: To deliver a personalized experience to each and every one of our customers.
      </p>
    </div>
    <div class="welcome-image">
      <img src="../images/Welcomeimage1.jpg" id="welcomeImage" alt="Welcome Image">
    </div>
  </div>

  <div class="edit-mode-container">
    <button type="submit" id="saveChangesBtn">Save Changes</button>
  </div>
</form>


<!-- Product Section -->
<div class="container" id="product-container">
  <div class="product_box" id="product1"></div>
</div>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("http://localhost:8080/servicess")
      .then(response => response.json())
      .then(products => {
        const container = document.getElementById("product-container");
        container.innerHTML = "";

        products.forEach(product => {
          const productBox = document.createElement("div");
          productBox.classList.add("product_box");
          productBox.innerHTML = `
            <a href="#" class="product-name">${product.Title}</a>
            <p class="product-price">$${parseFloat(product.Price).toFixed(2)}</p>
            <p class="service-details">${product.Description}</p>
            <a href="../User-Logged-in/ProductDetail.html?Title=${encodeURIComponent(product.Title)}&Price=${encodeURIComponent(product.Price)}&Description=${encodeURIComponent(product.Description)}">
              <button class="view-product-btn btn">View</button>
            </a>
          `;
          container.appendChild(productBox);
        });
      })
      .catch(error => console.error("Error loading products:", error));
  });
</script>

<!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-column">
      <h3>Admin Contact</h3>
      <p id="adminName"></p>
      <p id="adminEmail"></p>
      <p id="adminPhone"></p>
      <p id="adminAddress"></p>
      <p id="adminCity"></p>
      <p id="adminProvince"></p>
      <p id="adminPostalCode"></p>
    </div>
    <div class="footer-column">
      <h3>Customers</h3>
      <ul>
        <li><a href="#">Catalogs</a></li>
        <li><a href="#">Do Not Sell My Info</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h3>Company</h3>
      <ul>
        <li><a href="view-only/about.html">About Us</a></li>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-credits">
    <p>&copy; YourCompanyName</p>
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetch("http://localhost:8080/admin-profile")
      .then(response => response.json())
      .then(data => {
        if (data) {
          document.getElementById("adminName").innerHTML = `Business Name: ${data.fname || "N/A"}`;
          document.getElementById("adminEmail").innerHTML = `Email: ${data.email || "N/A"}`;
          document.getElementById("adminPhone").innerHTML = `Phone: ${data.pn || "N/A"}`;
          document.getElementById("adminAddress").innerHTML = `Address: ${data.address || "N/A"}`;
          document.getElementById("adminCity").innerHTML = `City: ${data.city || "N/A"}`;
          document.getElementById("adminProvince").innerHTML = `Province: ${data.pt || "N/A"}`;
          document.getElementById("adminPostalCode").innerHTML = `Postal Code: ${data.pc || "N/A"}`;
          } else {
          console.error("Failed to fetch admin profile: No data returned.");
        }
      })
      .catch(error => console.error("Error fetching admin profile:", error));
  });
</script>

</body>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const editButton = document.getElementById("toggleEditModeBtn");
    const saveButton = document.getElementById("saveChangesBtn");
    let editMode = false;

    // Fetch existing descriptions
    fetch("http://localhost:8080/api/get-descriptions")
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          document.getElementById("welcomeTitle").innerText = data.data.welcomeTitle;
          document.getElementById("welcomeSlogan").innerText = data.data.welcomeSlogan;
          document.getElementById("coreValuesTitle").innerText = data.data.coreValuesTitle;
          document.getElementById("coreValuesText").innerText = data.data.coreValuesText;
        } else {
          console.error("Failed to fetch descriptions:", data.message);
        }
      })
      .catch(error => console.error("Error fetching descriptions:", error));

    // Toggle edit mode
    editButton.addEventListener("click", () => {
      editMode = !editMode;
      document.querySelectorAll("[contenteditable]").forEach(element => {
        element.contentEditable = editMode ? "true" : "false";
        element.style.border = editMode ? "2px dashed #4a7b9b" : "none";
      });
      editButton.textContent = editMode ? "Disable Edit Mode" : "Enable Edit Mode";
    });

    // Save changes
    saveButton.addEventListener("click", event => {
      event.preventDefault();

      const descriptions = {
        welcomeTitle: document.getElementById("welcomeTitle").innerText.trim(),
        welcomeSlogan: document.getElementById("welcomeSlogan").innerText.trim(),
        coreValuesTitle: document.getElementById("coreValuesTitle").innerText.trim(),
        coreValuesText: document.getElementById("coreValuesText").innerText.trim(),
      };

      fetch("http://localhost:8080/api/update-descriptions", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(descriptions),
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            alert("Descriptions updated successfully!");
          } else {
            alert("Failed to update descriptions.");
          }
        })
        .catch(error => console.error("Error updating descriptions:", error));
    });
  });
</script>

</html>
